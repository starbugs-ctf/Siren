import { Ctx } from "blitz"
import db from "db"

type GetSimilarExploitsArgs = {
  exploitName: string
  problemId: number
}

export default async function getSimilarExploits(args: GetSimilarExploitsArgs, ctx: Ctx) {
  const tasks = await db.exploit.findMany({
    where: {
      name: args.exploitName,
      problemId: args.problemId,
    },
    orderBy: {
      createdAt: "desc",
    },
    include: {
      problem: true,
    },
  })

  return tasks
}
